<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <title>AR Video with Plyr.js</title>
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.css" />
  
  <!-- Plyr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.8.10/dist/plyr.css" />
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.8.10/dist/plyr.min.js"></script>

  <style>
    body, html { margin:0; padding:0; height:100%; overflow:hidden; background:black; }
    #home-btn {
      position: fixed; top:15px; left:15px;
      background: rgba(0,0,0,0.6); color:white;
      border:none; border-radius:50%;
      width:50px; height:50px; font-size:22px;
      cursor:pointer; z-index:9999;
    }
    /* éš±è—åŸå§‹ video */
    #myVideo { display:none; }
  </style>
</head>
<body>

<button id="home-btn" onclick="window.location.href='https://starlightar.webflow.io/'">ğŸ </button>

<a-scene mindar-image="imageTargetSrc: travel-target.mind; autoStart: true"
         vr-mode-ui="enabled:false"
         device-orientation-permission-ui="enabled:true"
         embedded>

  <a-assets>
    <video id="myVideo" playsinline crossorigin="anonymous" loop></video>
  </a-assets>

  <!-- Marker -->
  <a-entity mindar-image-target="targetIndex:0" id="video-marker">
    <!-- å½±ç‰‡æœƒç›´æ¥ç”¨ Plyr æ’­ -->
  </a-entity>

  <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>
</a-scene>

<script>
const videoEl = document.getElementById("myVideo");
videoEl.src = "Comp.mp4";

// åˆå§‹åŒ– Plyr
const player = new Plyr(videoEl, {
  controls: ['play', 'progress', 'mute'], 
  autoplay: false,
  loop: { active: true }
});

// Marker åµæ¸¬äº‹ä»¶
const markerEl = document.getElementById("video-marker");
markerEl.addEventListener("targetFound", () => {
  console.log("ğŸ¥ Marker Found â†’ æ’­æ”¾å½±ç‰‡");
  player.play();
});
markerEl.addEventListener("targetLost", () => {
  console.log("â¸ Marker Lost â†’ æš«åœå½±ç‰‡");
  player.pause();
});
</script>

</body>
</html>
