<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <title>AR Marker Video Floating</title>
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.css" />

  <!-- Plyr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.8.10/dist/plyr.css" />
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.8.10/dist/plyr.min.js"></script>
</head>
<body>

<a-scene mindar-image="imageTargetSrc: travel-target.mind; autoStart: true"
         vr-mode-ui="enabled:false"
         device-orientation-permission-ui="enabled:true"
         embedded>

  <a-assets>
    <video id="myVideo" playsinline crossorigin="anonymous" loop muted></video>
  </a-assets>

  <!-- Marker -->
  <a-entity mindar-image-target="targetIndex:0" id="video-marker">
    <a-plane id="videoPlane" width="1.6" height="0.9" position="0 0 0" rotation="0 0 0" material="shader: flat; src: #myVideo"></a-plane>
  </a-entity>

  <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>
</a-scene>

<script>
const videoEl = document.getElementById("myVideo");
videoEl.src = "Comp.mp4";

// 初始化 Plyr（可保留控制器，或隱藏）
const player = new Plyr(videoEl, {
  controls: ['play', 'progress', 'mute'],
  autoplay: false,
  loop: { active: true }
});

// Marker 偵測事件
const markerEl = document.getElementById("video-marker");
markerEl.addEventListener("targetFound", () => {
  player.play();
});
markerEl.addEventListener("targetLost", () => {
  player.pause();
});
</script>

</body>
</html>
